<!-- Header Principal -->
<header class="navbar navbar-expand-md d-print-none bg-primary" role="banner">
  <div class="container">
    <!-- Mobile Menu -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbar-menu"
      aria-controls="navbar-menu"
      aria-expanded="false"
      aria-label="Abrir menú de navegación"
    >
      <span class="navbar-toggler-icon text-white" aria-hidden="true"></span>
    </button>

    <!-- Logo -->
    <h1
      class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-md-3 pe-0"
    >
      <a [routerLink]="['/admin/dashboard']" aria-label="Ir al dashboard">
        <img
          src="/assets/img/logos/logo-blanco.png"
          width="110"
          height="32"
          alt="Logo de la aplicación"
          class="navbar-brand-image"
        />
      </a>
    </h1>

    <!-- User Menu -->
    <nav class="navbar-nav order-md-last flex-row" aria-label="Menú de usuario">
      <!-- Website Link -->
      <div class="nav-item d-none d-md-flex me-3">
        <div class="btn-list">
          <a
            href="/"
            class="btn btn-primary"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Ir al sitio web público (se abre en una nueva ventana)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon icon-tabler icons-tabler-outline icon-tabler-world-www"
              aria-hidden="true"
              focusable="false"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M19.5 7a9 9 0 0 0 -7.5 -4a8.991 8.991 0 0 0 -7.484 4" />
              <path d="M11.5 3a16.989 16.989 0 0 0 -1.826 4" />
              <path d="M12.5 3a16.989 16.989 0 0 1 1.828 4" />
              <path d="M19.5 17a9 9 0 0 1 -7.5 4a8.991 8.991 0 0 1 -7.484 -4" />
              <path d="M11.5 21a16.989 16.989 0 0 1 -1.826 -4" />
              <path d="M12.5 21a16.989 16.989 0 0 0 1.828 -4" />
              <path d="M2 10l1 4l1.5 -4l1.5 4l1 -4" />
              <path d="M17 10l1 4l1.5 -4l1.5 4l1 -4" />
              <path d="M9.5 10l1 4l1.5 -4l1.5 4l1 -4" />
            </svg>
            <span>Sitio Web</span>
          </a>
        </div>
      </div>

      <!-- User Dropdown -->
      <div class="nav-item dropdown">
        <button
          class="nav-link d-flex lh-1 text-reset border-0 bg-transparent p-0"
          data-bs-toggle="dropdown"
          aria-label="Menú de usuario"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <span class="avatar avatar-sm" aria-hidden="true">
            {{ avatarName() }}
          </span>
          <div class="d-none d-xl-block ps-2 text-white">
            <div>{{ user()?.name }} {{ user()?.paternal_surname }}</div>
            <div class="small mt-1 text-white">{{ user()?.rut }}</div>
          </div>
        </button>

        <div
          class="dropdown-menu dropdown-menu-end dropdown-menu-arrow"
          data-bs-theme="light"
          role="menu"
        >
          <a
            [routerLink]="['/admin/users/profile-update']"
            class="dropdown-item"
            role="menuitem"
            aria-label="Editar perfil de usuario"
          >
            Mi Perfil
          </a>
          <a
            [routerLink]="['/admin/users/password-update']"
            class="dropdown-item"
            role="menuitem"
            aria-label="Cambiar contraseña de usuario"
          >
            Cambiar contraseña
          </a>
          <button
            (click)="logout()"
            class="dropdown-item"
            role="menuitem"
            aria-label="Cerrar sesión de usuario"
            [disabled]="isLogoutDisabled()"
          >
            Cerrar sesión
          </button>
        </div>
      </div>
    </nav>
  </div>
</header>
